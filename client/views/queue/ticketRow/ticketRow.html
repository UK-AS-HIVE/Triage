<template name="ticketRow">
<tr data-toggle="collapse" data-target="#row{{_id}}" class="accordion-toggle ticket-row" data-ticket="{{_id}}">
  <td>
    <span class="glyphicon glyphicon-plus" name="{{_id}}"></span>
    {{#if repliedTo}}
    <span class="glyphicon glyphicon-comment"></span>
    {{/if}}
    {{#if hasAttachment}}
    <span class="glyphicon glyphicon-paperclip"></span>
    {{/if}}
    {{#if unread}}
    <span class="glyphicon glyphicon-bell"></span>
    {{/if}}
  </td>
  <td>{{title}}</td>
  <td>
    <div class="ticket-requester-portrait">
      {{>userPortrait userId=this.authorId class="in-row"}}
    </div>
    {{authorName}}
  </td>
  <td>
    {{#each associatedUserIds}}
    {{>userPortrait userId=this associated=true class="in-row"}}
    {{/each}}
  </td>
  <td>
    <div class="dropdown" data-ticket="{{_id}}">
      <button class="btn btn-default btn-xs dropdown-toggle" type="button" data-toggle="dropdown" name="statusButton" aria-expanded="false">{{status}}<span class="caret"></span></button>
      <ul class="dropdown-menu" name="statusMenu" role="menu" aria-labelledby="ticketStatusDropdown">
        <li role="presentation"><a role="menuitem" tabindex="-1">Open</a></li>
        <li role="presentation"><a role="menuitem" tabindex="-1">Closed</a></li>
        <li role="presentation" class="ticket-status-input"><input type="text" name="customStatus" placeholder="Or a custom status"></li>
      </ul>
    </div>
  </td>
  <td>{{>timeParser date=submittedTimestamp}}</td>
</tr>
<tr>
  <td colspan='6' class="hiddenRow">
    <div class="accordion-body collapse" id="row{{_id}}" data-ticket="{{_id}}">
      <div class="panel panel-default ticket-row-panel">
        <div class="panel-heading clearfix">
          <div class="col-md-3 col-xs-6">
            <div class="col-xs-2">
              {{>userPortrait userId=this.authorId class="user-image"}}
            </div>
            <div class="col-xs-9">
              <strong>
                {{author.displayName}}<br>
                {{author.department}}<br>
                {{author.physicalDeliveryOfficeName}}<br>
              </strong>
            </div>
          </div>
          <div class="col-md-3 col-md-offset-6 col-xs-6" style="text-align: right; float: right;">
            <a href="/ticket/{{ticketNumber}}">#{{ticketNumber}}</a><br>
            {{>timestampFormatter date=submittedTimestamp}}<br>
            {{>timeParser date=submittedTimestamp}}
          </div>
        </div>
        <div class="panel-body ticket-row-panel-body">

          <blockquote>
            {{body}}
          </blockquote>

          {{>infoTable}}

          {{#each changelog}}
            {{>changelogItem}}
          {{/each}}

          {{>noteInput admin=true ticket=_id}}

        </div>

        <div class="hidden-xs col-md-12">
          {{#each arrayify formFields}}
          {{>tableFormGroup name=name value=value disabled="disabled"}}
          {{/each}}
        </div>
      </div>
    </div>
  </td>
</tr>
</template>
