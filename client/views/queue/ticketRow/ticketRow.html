<template name="ticketRow">
<tr data-toggle="collapse" data-target="#row{{_id}}" class="accordion-toggle ticket-row" data-ticket="{{_id}}">
  <td class="hidden-xs">
    <span class="glyphicon glyphicon-plus" name="{{_id}}"></span>
    {{#if repliedTo}}
    <span class="glyphicon glyphicon-comment"></span>
    {{/if}}
    {{#if hasAttachment}}
    <span class="glyphicon glyphicon-paperclip"></span>
    {{/if}}
    {{#if unread}}
    <span class="glyphicon glyphicon-bell"></span>
    {{/if}}
  </td>
  <td>{{title}}</td>
  <td>
    <div class="ticket-requester-portrait">
      {{>userPortrait userId=this.authorId class="in-row"}}
    </div>
    {{authorName}}
  </td>
  <td class="hidden-xs">
    {{#each associatedUserIds}}
    {{>userPortrait userId=this associated=true class="in-row"}}
    {{/each}}
  </td>
  <td>
    <div class="dropdown" data-ticket="{{_id}}">
      <button class="btn btn-default btn-xs dropdown-toggle" type="button" data-toggle="dropdown" name="statusButton" aria-expanded="false">{{status}}<span class="caret"></span></button>
      <ul class="dropdown-menu" name="statusMenu" role="menu" aria-labelledby="ticketStatusDropdown">
        <li role="presentation"><a role="menuitem" tabindex="-1">Open</a></li>
        <li role="presentation"><a role="menuitem" tabindex="-1">Closed</a></li>
        <li role="presentation" class="ticket-status-input"><input type="text" name="customStatus" placeholder="Or a custom status"></li>
      </ul>
    </div>
  </td>
  <td>{{>timeParser date=submittedTimestamp}}</td>
</tr>
<tr>
  <td colspan='6' class="hiddenRow">
    <div class="accordion-body collapse" id="row{{_id}}" data-ticket="{{_id}}">
      <div class="panel panel-default ticket-row-panel">
        <div class="panel-heading clearfix">
          {{> ticketHeading}}
        </div>
        <div class="panel-body ticket-row-panel-body">

          <blockquote>
            {{body}}
          </blockquote>

          {{> ticketInfoTable}}

          {{#each changelog}}
            {{> ticketChangelogItem}}
          {{/each}}

          {{> ticketNoteInput admin=true ticket=_id}}

        </div>

        <div class="hidden-xs col-md-12">
          {{#each arrayify formFields}}
          {{>tableFormGroup name=name value=value disabled="disabled"}}
          {{/each}}
        </div>
      </div>
    </div>
  </td>
</tr>
</template>
